# è´¡çŒ®æŒ‡å— (Contributing Guide)

æ„Ÿè°¢æ‚¨å¯¹ **Railway 12306** é¡¹ç›®çš„å…³æ³¨ï¼è¿™ä»½æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨å¦‚ä½•å‚ä¸é¡¹ç›®çš„å¼€å‘å’Œè´¡çŒ®ã€‚

## ç›®å½•

1. [å¼€å§‹ä¹‹å‰](#å¼€å§‹ä¹‹å‰)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
4. [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
5. [æäº¤ Pull Request](#æäº¤-pull-request)
6. [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)

---

## å¼€å§‹ä¹‹å‰

åœ¨å¼€å§‹è´¡çŒ®ä»£ç ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. é˜…è¯» [README.md](./README.md) äº†è§£é¡¹ç›®æ¦‚å†µåŠéƒ¨ç½²æ–¹å¼ã€‚
2. é˜…è¯» [requirement.md](./requirement.md) äº†è§£è¯¦ç»†çš„åŠŸèƒ½éœ€æ±‚ã€‚
3. æ£€æŸ¥ [Issues](https://github.com/railway12606/issues) åˆ—è¡¨ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ‚¨æ„Ÿå…´è¶£çš„ä»»åŠ¡ï¼Œé€šè¿‡è¯„è®ºè®¤é¢† Issueã€‚

## ç¯å¢ƒå‡†å¤‡

ä¸ºäº†ä¿è¯å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œè¯·ä¸¥æ ¼éµå¾ªä»¥ä¸‹é…ç½®ï¼š

### 1. åç«¯ç¯å¢ƒ

æˆ‘ä»¬å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒï¼Œä»¥é¿å…ç³»ç»Ÿæƒé™é—®é¢˜ã€‚

```bash
cd backend

# 1. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python3 -m venv .venv
source .venv/bin/activate

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. ç¯å¢ƒå˜é‡
cp .env.example .env

# 4. æ•°æ®åº“å‡†å¤‡
# è¯·åŠ¡å¿…å‚è€ƒ README ä¸­çš„ "æ•°æ®åº“é…ç½®" ç« èŠ‚ï¼Œç¡®ä¿åˆ›å»ºäº†æ­£ç¡®çš„ç”¨æˆ·å¹¶èµ‹äºˆäº† schema æƒé™
```

### 2. å‰ç«¯ç¯å¢ƒ

```bash
cd frontend
npm install
```

## å¼€å‘æµç¨‹

### 1. åˆ†æ”¯ç®¡ç†

æˆ‘ä»¬ä½¿ç”¨ **Git Flow** çš„ç®€åŒ–ç‰ˆæœ¬ï¼š

*   `main`: ä¸»åˆ†æ”¯ï¼Œå­˜æ”¾ç¨³å®šçš„å‘å¸ƒä»£ç ã€‚
*   `dev` (å¯é€‰): å¼€å‘ä¸»åˆ†æ”¯ã€‚
*   **åŠŸèƒ½åˆ†æ”¯**: ä» `main` æ£€å‡ºï¼Œå‘½åæ ¼å¼ `feat/feature-name`ã€‚
*   **ä¿®å¤åˆ†æ”¯**: ä» `main` æ£€å‡ºï¼Œå‘½åæ ¼å¼ `fix/issue-name`ã€‚

```bash
# æ›´æ–°æœ¬åœ°ä»£ç 
git checkout main
git pull origin main

# åˆ›å»ºæ–°åŠŸèƒ½åˆ†æ”¯
git checkout -b feat/search-trains
```

### 2. æœ¬åœ°å¼€å‘

#### å¯åŠ¨åç«¯

```bash
cd backend
source .venv/bin/activate
uvicorn app.main:app --reload
```
*   API æ–‡æ¡£: http://localhost:8000/api/docs

#### å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm run dev
```
*   é¡µé¢é¢„è§ˆ: http://localhost:5173

### 3. æ³¨æ„äº‹é¡¹

*   **æ•°æ®åº“ä¿®æ”¹**: å¦‚æœæ‚¨ä¿®æ”¹äº† SQLAlchemy æ¨¡å‹ (`app/models/`)ï¼Œ**å¿…é¡»**ç”Ÿæˆæ–°çš„è¿ç§»è„šæœ¬ï¼š
    ```bash
    alembic revision --autogenerate -m "Add booking table"
    alembic upgrade head
    ```
*   **æƒé™é—®é¢˜**: å¦‚æœé‡åˆ°æ•°æ®åº“æƒé™æŠ¥é”™ (`permission denied`)ï¼Œè¯·å‚è€ƒ README ä¸­çš„æ’æŸ¥æŒ‡å—ï¼Œä¸è¦éšæ„æ›´æ”¹æ•°æ®åº“ ownerã€‚

---

## ä»£ç è§„èŒƒ

### 1. æäº¤ä¿¡æ¯ (Commit Messages)

è¯·ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

*   `feat`: æ–°åŠŸèƒ½
*   `fix`: ä¿®å¤ Bug
*   `docs`: æ–‡æ¡£å˜æ›´
*   `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“é€»è¾‘ï¼‰
*   `refactor`: é‡æ„ï¼ˆæ— æ–°åŠŸèƒ½æˆ– Bug ä¿®å¤ï¼‰
*   `chore`: æ„å»ºç³»ç»Ÿæˆ–å·¥å…·å˜æ›´

**ç¤ºä¾‹**:
```
feat(user): æ·»åŠ ç”¨æˆ·æ³¨å†Œæ¥å£
fix(order): ä¿®å¤è®¢å•é‡‘é¢è®¡ç®—é”™è¯¯çš„ Bug
docs: æ›´æ–°éƒ¨ç½²æ–‡æ¡£
```

### 2. åç«¯è§„èŒƒ (Python)

*   **é£æ ¼**: éµå¾ª PEP 8ã€‚
*   **ç±»å‹æç¤º**: æ‰€æœ‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å¿…é¡»æ·»åŠ  Type Hintsã€‚
*   **API è®¾è®¡**:
    *   RESTful é£æ ¼ã€‚
    *   ä½¿ç”¨ Pydantic Schema è¿›è¡Œæ•°æ®éªŒè¯ (`app/schemas/`)ã€‚
    *   ä¸šåŠ¡é€»è¾‘å°½é‡å°è£…åœ¨ `CRUD` æˆ– `Service` å±‚ï¼Œä¿æŒ Router ç®€æ´ã€‚

**ç¤ºä¾‹**:
```python
# GOOD
@router.get("/{id}", response_model=schemas.User)
def read_user(id: int, db: Session = Depends(get_db)):
    ...

# BAD (æ— ç±»å‹æç¤ºï¼Œé€»è¾‘æ··æ‚)
@router.get("/get_user")
def get_user(id):
    ...
```

### 3. å‰ç«¯è§„èŒƒ (Vue 3)

*   **é£æ ¼**: ä½¿ç”¨ Vue 3 Composition API (`<script setup>`)ã€‚
*   **ç»„ä»¶åº“**: ç»Ÿä¸€ä½¿ç”¨ Ant Design Vue ç»„ä»¶ï¼Œä¸è¦å¼•å…¥å…¶ä»–ä¼šå¯¼è‡´é£æ ¼å‰²è£‚çš„åº“ã€‚
*   **è¯·æ±‚**: API è¯·æ±‚å°è£…åœ¨ `src/api/` ç›®å½•ä¸‹ï¼Œä¸è¦åœ¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨ `axios`ã€‚

**ç»„ä»¶ç¤ºä¾‹**:
```vue
<script setup>
import { ref } from 'vue';
import { useUserStore } from '@/stores/user';

const userStore = useUserStore();
</script>

<template>
  <a-button type="primary" @click="userStore.login">ç™»å½•</a-button>
</template>
```

---

## æäº¤ Pull Request

1.  **ä»£ç è‡ªæµ‹**: ç¡®ä¿æœ¬åœ°è¿è¡Œæ— è¯¯ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ Console æŠ¥é”™ã€‚
2.  **æäº¤**: å°†ä»£ç  push åˆ°æ‚¨çš„è¿œç¨‹åˆ†æ”¯ã€‚
3.  **åˆ›å»º PR**: åœ¨ GitHub ä¸Šå‘èµ· Pull Request åˆ° `main` åˆ†æ”¯ã€‚
4.  **æè¿°**: æ¸…æ™°å¡«å†™ PR æè¿°æ¨¡æ¿ï¼š
    *   ä¿®æ”¹äº†ä»€ä¹ˆï¼Ÿ
    *   è§£å†³äº†å“ªä¸ª Issueï¼Ÿ(ä¾‹å¦‚ `Closes #123`)
    *   å¦‚æœæœ‰ UI å˜æ›´ï¼Œè¯·é™„å¸¦æˆªå›¾ã€‚

---

## è¡Œä¸ºå‡†åˆ™

*   **å°Šé‡ä¸å‹å–„**: æˆ‘ä»¬æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ç¤¾åŒºï¼Œè¯·ä¿æŒç¤¼è²Œå’Œä¸“ä¸šã€‚
*   **å»ºè®¾æ€§åé¦ˆ**: åœ¨ Code Review æ—¶ï¼Œè¯·é’ˆå¯¹ä»£ç æå‡ºå…·ä½“çš„æ”¹è¿›å»ºè®®ã€‚

æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ æ›´å¥½çš„å¼€æºé¡¹ç›®ï¼ ğŸš€
